

; =======================================================================================================
; =======================================================================================================
proc delay ;[Clock ]		equ es:6Ch
; Enter: [Clock],es:6ch - Clock staus, מצב מונה השעון
;  		 [LongDelay] - Number of clock ticks to wait until the procedure returns.
; Exit: Performs a time delay according to the value in [LongDelay]
	doPush ax,cx,es
	mov ax, 40h
	mov es, ax
	mov ax, [Clock]
	
FirstTick: 
	cmp ax, [Clock]		;Starting delay only when firt tick occurs.
	je FirstTick
	
	mov cx, [LongDelay] ;4 = 0.55*4 = approx 2 seconds. 1 tick = 0.55 sec
	
DelayLoop:
	mov ax, [Clock]		;getting timer status
Tick:
	cmp ax, [Clock]		;checking if it has changed meaning there was a tick.
	je Tick				;didnt change? wait until it changes.
	loop DelayLoop
	doPop es,cx,ax
ret
endp delay
; =======================================================================================================
; =======================================================================================================
; |
; |
; |
; |
; |
; |
; |
; |
; |
; =======================================================================================================
; =======================================================================================================

proc ShortDelayP
;enter: [ShortDelay]- runs nop [ShortDelay]*0FFFh times, meaning [ShortDelay] decides how long the delay will be.
	
;exit: performs a very short delay when called
	doPush cx, bx, ax, dx
	
	; push dx	;picYcor   saving picXcor and picYcor before proc UpdatePicPos changed them, in case MouseHandler needs them.
	; push ax	;picXcor
	
	mov cx, [ShortDelay]	;22 for dog
outerl:
	push cx
	mov cx, 0FFFFh

	delayl:
		nop
	loop delayl
	pop cx
loop outerl
	ExitIfESC	;exits if escape is pressed
	
doPop dx, ax, bx, cx	
ret
endp ShortDelayP
; =======================================================================================================
; =======================================================================================================